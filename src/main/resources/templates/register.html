<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>注册</title>
<link href="/manager/register/verify/css/bootstrap.min.css" rel="stylesheet">
<link href="/manager/register/verify/css/gloab.css" rel="stylesheet">
<link href="/manager/register/verify/css/index.css" rel="stylesheet">
<script src="/manager/register/verify/js/jquery-1.11.1.min.js"></script>
<script
	src="static/boot/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
	    <!-- layer -->
    <script type="text/javascript" src="static/layer/layer.js"></script>
<script src="/manager/register/verify/js/register.js"></script>
<script type="text/javascript" charset="utf-8" src="/manager/kindeditor-4.1.10/kindeditor-all-min.js"></script>
	<script type="text/javascript" charset="utf-8" src="/manager/kindeditor-4.1.10/lang/zh_CN.js"></script>
<script type="text/javascript" src="/manager/register/verify/js/common.js"></script>
<link href="/manager/kindeditor-4.1.10/themes/default/default.css"
	type="text/css" rel="stylesheet">
</head>
<body class="bgf4">
<div class="login-box f-mt10 f-pb50">
	<div class="main bgf">    
    	<div class="reg-box-pan display-inline">  
        	<div class="step">        	
                <ul>
                    <li class="col-xs-4 on">
                        <span class="num"><em class="f-r5"></em><i>1</i></span>                	
                        <span class="line_bg lbg-r"></span>
                        <p class="lbg-txt">填写账户信息</p>
                    </li>
                    <li class="col-xs-4">
                        <span class="num"><em class="f-r5"></em><i>2</i></span>
                        <span class="line_bg lbg-l"></span>
                        <span class="line_bg lbg-r"></span>
                        <p class="lbg-txt">验证账户信息</p>
                    </li>
                    <li class="col-xs-4">
                        <span class="num"><em class="f-r5"></em><i>3</i></span>
                        <span class="line_bg lbg-l"></span>
                        <p class="lbg-txt">注册账号</p>
                    </li>
                </ul>
            </div>
        	<div class="reg-box" id="verifyCheck" style="margin-top:20px;">
                <form action="/user/register"  method="post">
            	<div class="part1">                	
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>用户名：</span>    
                        <div class="f-fl item-ifo">
                            <input type="text"  name="userName" maxlength="20" class="txt03 f-r3 required" tabindex="1" data-valid="isNonEmpty||between:3-20||isUname" data-error="用户名不能为空||用户名长度3-20位||只能输入中文、字母、数字、下划线，且以中文或字母开头" id="adminNo" />                            <span class="ie8 icon-close close hide"></span>
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus"><span>3-20位，中文、字母、数字、下划线的组合，以中文或字母开头</span></label>
                            <label class="focus valid"></label>
                        </div>
                    </div>
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>手机号：</span>    
                        <div class="f-fl item-ifo">
                            <input type="text" name="usertel" class="txt03 f-r3 required" keycodes="tel" tabindex="2" data-valid="isNonEmpty||isPhone" data-error="手机号码不能为空||手机号码格式不正确" maxlength="11" id="phone" /> 
                            <span class="ie8 icon-close close hide"></span>                           
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus">请填写11位有效的手机号码</label>
                            <label class="focus valid"></label>
                        </div>
                    </div>
                      <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>用户编号：</span>    
                        <div class="f-fl item-ifo">
                            <input type="text" name="userNum" class="txt03 f-r3 f-fl required"  tabindex="2" data-valid="isNonEmpty" data-error="用户不能为空" maxlength="11" id="userNum" /> 
                            <span class="ie8 icon-close close hide"></span>                           
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus">请填写位有效的用户编号</label>
                            <label class="focus valid"></label>
                        </div>
                    </div>
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>密码：</span>    
                        <div class="f-fl item-ifo">
                            <input type="password"  name="password" id="password" maxlength="20" class="txt03 f-r3 required" tabindex="3" style="ime-mode:disabled;" onpaste="return  false" autocomplete="off" data-valid="isNonEmpty||between:6-20||level:2" data-error="密码不能为空||密码长度6-20位||该密码太简单，有被盗风险，建议字母+数字的组合" /> 
                            <span class="ie8 icon-close close hide" style="right:55px"></span>
                            <span class="showpwd" data-eye="password"></span>                        
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus">6-20位英文（区分大小写）、数字、字符的组合</label>
                            <label class="focus valid"></label>
                            <span class="clearfix"></span>
                            <label class="strength">
                            	<span class="f-fl f-size12">安全程度：</span>
                            	<b><i>弱</i><i>中</i><i>强</i></b>
                            </label>    
                        </div>
                    </div>
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>确认密码：</span>    
                        <div class="f-fl item-ifo">
                            <input type="password" maxlength="20" class="txt03 f-r3 required" tabindex="4" style="ime-mode:disabled;" onpaste="return  false" autocomplete="off" data-valid="isNonEmpty||between:6-16||isRepeat:password" data-error="密码不能为空||密码长度6-16位||两次密码输入不一致" id="rePassword" />
                            <span class="ie8 icon-close close hide" style="right:55px"></span>
                            <span class="showpwd" data-eye="rePassword"></span>
                            <label class="icon-sucessfill blank hide"></label>
                            <label class="focus">请再输入一遍上面的密码</label> 
                            <label class="focus valid"></label>                          
                        </div>
                    </div>
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl"><b class="ftx04">*</b>验证码：</span>    
                        <div class="f-fl item-ifo">
                            <span class="ie8 icon-close close hide"></span>
                            <input type="text" maxlength="6" width="280px" class="txt03 f-r3 f-fl required" tabindex="8" style="display:block; float:left;" id="randCode" data-valid="isNonEmpty" data-error="验证码不能为空" /> 
                              <label class="focus">请输入验证码</label>  
                              <label class="focus valid" ></label>    
                            	<canvas id="canvas" width="270px"  height="50" style="display: inline; " ></canvas>                               
                                 <script type="text/javascript">
                                 $("#randCode").blur(function(){
                                 if($(this).val()!=yanzhengma){
                                 //alert(yanzhengma);
                                 layer.msg("温馨提示：当前验证码为："+yanzhengma);
                                 $(this).next().next().text("验证码不正确!");
                                 isyanzhengma = false;
                                 }else{
                                 isyanzhengma = true;
                                 }
                                 });
                                 
                                 $("#randCode").focus(function(){
                                
                                 $(this).next().next().text("");
                                
                                 });
                                 </script>                           
                        </div>
                    </div>
                    
                    <div class="item col-xs-12" style="height:auto">
                        <span class="intelligent-label f-fl">&nbsp;</span>  
                        <p class="f-size14 required"  data-valid="isChecked" data-error="请先同意条款"> 
                         <br><br>  
                        	<input type="checkbox" checked /><a href="javascript:showoutc();" class="f-ml5">我已阅读并同意条款</a>
                        </p>                       
                        <label class="focus valid"></label> 
                    </div> 
                    <div class="item col-xs-12">
                        <span class="intelligent-label f-fl">&nbsp;</span>    
                        <div class="f-fl item-ifo">
                           <a href="javascript:;" class="btn btn-blue f-r3" id="btn_part1">下一步</a>  
                                            
                        </div>
                    </div> 
                </div>
                <div class="part2" style="display:none">
                	
              
              <div class="alert alert-info" style="width:700px">请上传您的用户头像</div> 
                     <h3>您可以使用我们为您提供的图片裁剪器选择您想要的头像尺寸！</h3>
                   
                    <div class="item col-xs-12 f-mb10" style="height:auto">
                                                    <iframe src="/manager/register/verify/upload/index.html" width="100%" height="650px">
</iframe>
                       </div>
                       
              <div style="padding: 10px 10px 10px 10px" class="col-xs-12">
				<table cellpadding="5">
					<tr>
						<td><h3>请上传您的用户头像:&nbsp;&nbsp;&nbsp;&nbsp;</h3></td>
							<td>                  
							<a href="javascript:void(0)" type="button" class="btn btn-primary btn-lg btn-block active onePicUpload">please upload your avatar</a>
							<input type="hidden" name="token" />
							</td>
					</tr>
				</table>
				<br>
				<br>
				<br>
                </div>
               
 
                         <div class="item col-xs-12">
                        <span class="intelligent-label f-fl">&nbsp;</span>    
                        <div class="f-fl item-ifo">
                           <a href="javascript:;" class="btn btn-blue f-r3" id="btn_part2">下一步</a>                         
                        </div>
                        </div>
            </div>
                
              
                <div class="part3 text-center" style="display:none">
                	<h3>恭喜，您已检验成功，现在开始您的注册之旅吧！</h3>
                	<br>
                	<br><br>
                	<br>
                	
              <button  type="submit" class="btn btn-primary btn-lg btn-block active">please click here to login</button>
                </div>  
                </form>        
            </div>
        </div>
    </div>
</div>
<div class="m-sPopBg" style="z-index:998;"></div>
<div class="m-sPopCon regcon">
	<div class="m-sPopTitle"><strong>服务协议条款</strong><b id="sPopClose" class="m-sPopClose" onClick="closeClause()">×</b></div>
    <div class="apply_up_content">
    	<pre class="f-r0">
		<strong>同意以下服务条款，提交注册信息</strong>
        </pre>
    </div>
    <center><a class="btn btn-blue btn-lg f-size12 b-b0 b-l0 b-t0 b-r0 f-pl50 f-pr50 f-r3" href="javascript:closeClause();">已阅读并同意此条款</a></center>
</div>

<script>

 var yanzhengma = "";
 var isyanzhengma = false;
    function randomNum(min,max){
        return Math.floor(Math.random()*(max-min)+min);
    }
    function randomColor(min,max){
        var _r = randomNum(min,max);
        var _g = randomNum(min,max);
        var _b = randomNum(min,max);
        return "rgb("+_r+","+_g+","+_b+")";
    }
    document.getElementById("canvas").onclick = function(e){
        e.preventDefault();
        yanzhengma =  drawPic();
      // alert(yanzhengma);
    };
    function drawPic(){
        var $canvas = document.getElementById("canvas");
        var _str = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        var _picTxt = "";
        var _num = 6;
        var _width = $canvas.width;
        var _height = $canvas.height;
        var ctx = $canvas.getContext("2d");
        ctx.textBaseline = "bottom";
        ctx.fillStyle = randomColor(180,240);
        ctx.fillRect(0,0,_width,_height);
        for(var i=0; i<_num; i++){
            var x = (_width-10)/_num*i+10;
            var y = randomNum(_height/2,_height); /*y轴位置*/
            var deg = randomNum(-45,45);
            var txt = _str[randomNum(0,_str.length)];/*验证码*/
            _picTxt += txt;
            ctx.fillStyle = randomColor(10,100);
            ctx.font = randomNum(16,40)+"px SimHei";
            ctx.translate(x,y);
            ctx.rotate(deg*Math.PI/180);
            ctx.fillText(txt, 0,0);
            ctx.rotate(-deg*Math.PI/180);
            ctx.translate(-x,-y);
        }
        for(var i=0; i<_num; i++){
            ctx.strokeStyle = randomColor(90,180);
            ctx.beginPath();
            ctx.moveTo(randomNum(0,_width), randomNum(0,_height));
            ctx.lineTo(randomNum(0,_width), randomNum(0,_height));
            ctx.stroke();
        }
        for(var i=0; i<_num*10; i++){
            ctx.fillStyle = randomColor(0,255);
            ctx.beginPath();
            ctx.arc(randomNum(0,_width),randomNum(0,_height), 1, 0, 2*Math.PI);
            ctx.fill();
        }
        return _picTxt;
    }
   yanzhengma = drawPic();
</script>
<script>
$(function(){	
	E3.init();
	//第一页的确定按钮
	$("#btn_part1").click(function(){
	if(!isyanzhengma){
	return ;
	}						
		if(!verifyCheck._click()) return;
		$(".part1").hide();
		$(".part2").show();
		$(".step li").eq(1).addClass("on");
	});
	//第二页的确定按钮
	$("#btn_part2").click(function(){			
		if(!verifyCheck._click()) return;
		$(".part2").hide();
		$(".part3").show();	
	});	
	//第三页的确定按钮
	$("#btn_part3").click(function(){			
		if(!verifyCheck._click()) return;
		$(".part3").hide();
		$(".part4").show();
		$(".step li").eq(2).addClass("on");
		countdown({
			maxTime:10,
			ing:function(c){
				$("#times").text(c);
			},
			after:function(){
				window.location.href="my.html";		
			}
		});		
	});	
});
function showoutc(){$(".m-sPopBg,.m-sPopCon").show();}
function closeClause(){
	$(".m-sPopBg,.m-sPopCon").hide();		
}
</script>

</body>
</html>
